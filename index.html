<!DOCTYPE html>
<html lang="en">
<head>
	
    <title>oscilloscope.js</title>
	<meta charset="utf-8" />
	
	<!-- CSS -->
	<link rel="stylesheet" href="css/oscilloscope.css" />

	
	<!-- JavaScript -->
    <script src="js/oscilloscope.js"></script>

</head>
<body>
	<header>
		<a class="button" href="https://github.com/instrumentbible/oscilloscope.js/#readme">GitHub</a>
		<a class="button" href="https://github.com/instrumentbible/oscilloscope.js/wiki/#wiki-body">Docs</a>
		<a  href="https://github.com/instrumentbible/oscilloscope.js#readme"><h1>oscilloscope.js</h1></a>
		
		<div>
			<a class="button" onclick="audioSetup()">setup</a>
			<a class="button" onclick="startOscillator()">start</a>
		</div>
	</header>
	
	
	<div id="staffDiv" class="staff"></div>
	<div id="container"></div>

	
	<br/>

	
	<label for="framerate">framerate</label>
	<input type="number" id="framerate" value="60" min="1" max="90"/>
	
	<br/>
	
	<label for="thickness">thickness</label>
	<input type="number" id="thickness" value="5" min="1" max="30"/>
	
	<br/>
	
	
	<label for="color">color</label>
	<input type="color" id="color" value="#39FF14"/>
	
	<br/>
	
	<label for="background">background</label>
	<input type="color" id="background" value="#222222"/>
	
	<br/>

	<script>

	var options = {
		type: "oscilloscope",
		thickness: 5,
		id: "theOsc",
		at: "container",
		color: "#39FF14",
		background: "#222222",

	}

	// create a new oscilloscope
	var myOscilloscope = new Oscilloscope(options)

	// set the frame rate
	// myOscilloscope.setFrameRate(40);
	
	function audioSetup(){
		// analyser (for audio visualization)
		analyser = audioContext.createAnalyser();
		analyser.fftSize = 2048;
		analyser.smoothingTimeConstant = 0.5;
		analyser.maxDecibels = 3;
		analyser.minDecibels = 0;
		frequencyData = new Uint8Array(analyser.frequencyBinCount);

		// create an oscillator
		var oscillator = audioContext.createOscillator();
		oscillator.type = "sine";
		oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
		oscillator.start();
		oscillator.connect(analyser);
		//oscillator.connect(audioContext.destination);

		}
		function startOscillator(){

			myOscilloscope.draw(analyser);
			myOscilloscope.setFramerate(60);

		}

	

	// update framereate
	document.getElementById('framerate').addEventListener('input',	function (e) {
		myOscilloscope.setFramerate(this.value);
	});
	
	
	// update thickness
	document.getElementById('thickness').addEventListener('input', function (e) {
		myOscilloscope.setThickness(this.value);
	});
	
	// update color
	document.getElementById('color').addEventListener('input', function (e) {
		myOscilloscope.setColor(this.value);
	});
	
	// update background color
	document.getElementById('background').addEventListener('input', function (e) {
		myOscilloscope.setBackground(this.value);
	});
	
	
	</script>

</body>

</html>
